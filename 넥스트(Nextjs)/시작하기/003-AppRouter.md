# App Router

Next.js 앱 라우터는 React의 최신 기능을 사용하여 애플리케이션을 구축하기 위한 새로운 패러다임입니다.

이미 Next.js에 익숙하다면, 앱 라우터가 페이지 라우터의 기존 파일 시스템 기반 라우터에서 자연스럽게 진화한 것임을 알 수 있습니다.

새 애플리케이션의 경우 앱 라우터를 사용하는 것이 좋습니다.

기존 애플리케이션의 경우 앱 라우터를 점진적으로 도입할 수 있습니다. 동일한 애플리케이션에서 두 라우터를 모두 사용할 수도 있습니다.

## 자주 묻는 질문들

### 레이아웃에서 요청 객체에 액세스하려면 어떻게 해야 하나요?

의도적으로 원시 요청 객체에 액세스할 수 없습니다.

하지만 서버 전용 함수를 통해 `headers`와 `cookies`에 액세스할 수 있습니다. `cookies`를 설정할 수도 있습니다.

레이아웃은 다시 렌더링되지 않습니다. 페이지 사이를 이동할 때 불필요한 계산을 피하기 위해 레이아웃을 캐시하고 재사용할 수 있습니다.

레이아웃이 원시 요청에 액세스하지 못하도록 제한함으로써 Next.js는 레이아웃 내에서 성능에 부정적인 영향을 미칠 수 있는 잠재적으로 느리거나 비용이 많이 드는 사용자 코드의 실행을 방지할 수 있습니다.

또한 이 설계는 여러 페이지에 걸쳐 레이아웃에 일관되고 예측 가능한 동작을 적용하고, 개발자가 특정 페이지에 적용되는 레이아웃에 관계없이 동일한 방식으로 동작하는 레이아웃을 사용할 수 있으므로 개발 및 디버깅을 단순화합니다.

구축 중인 UI 패턴에 따라 병렬 경로를 사용하면 동일한 레이아웃에서 여러 페이지를 렌더링할 수 있으며, 페이지에서 경로 세그먼트와 URL 검색 매개변수에 액세스할 수 있습니다.

### 페이지의 URL에 액세스하려면 어떻게 해야 하나요?

기본적으로 페이지는 서버 컴포넌트입니다. 특정 페이지에 대한 `params` 속성을 통해 경로 세그먼트에 액세스하고 `searchParams` 속성을 통해 URL 검색 속성에 액세스할 수 있습니다.

클라이언트 컴포넌트를 사용하는 경우, 보다 복잡한 경로를 위해 `usePathname`, `useSelectedLayoutSegment`, `useSelectedLayoutSegments`를 사용할 수 있습니다.

또한 구축 중인 UI 패턴에 따라 병렬 경로를 사용하면 동일한 레이아웃에서 여러 페이지를 렌더링할 수 있으며, 페이지에서 경로 세그먼트와 URL 검색 매개변수에 액세스할 수 있습니다.

### 서버 컴포넌트에서 리디렉션하려면 어떻게 해야 하나요?

리디렉션을 사용하여 페이지에서 상대 또는 절대 URL로 리디렉션할 수 있습니다.

`redirect`는 **임시(307) 리디렉션**이고 `permanentRedirect`는 **영구(308) 리디렉션**입니다.

이 함수를 streaming UI에서 사용하면 메타 태그를 삽입하여 클라이언트 측에서 리디렉션을 실행합니다.

### App Router로 인증을 처리하려면 어떻게 해야 하나요?

다음은 앱 라우터를 지원하는 몇 가지 일반적인 인증 솔루션입니다.

- [NextAuth.js](https://next-auth.js.org/configuration/nextjs#in-app-router)
- [Clerk](https://clerk.com/docs/quickstarts/nextjs)
- [Auth0](https://github.com/auth0/nextjs-auth0#app-router)
- [Stytch](https://stytch.com/docs/example-apps/frontend/nextjs)
- 세션 또는 JWT를 수동으로 처리하기

### 쿠키를 설정하려면 어떻게 해야 하나요?

쿠키 기능을 사용하여 서버 액션 또는 라우트 핸들러에서 쿠키를 설정할 수 있습니다.

HTTP는 스트리밍 시작 후 쿠키 설정을 허용하지 않으므로 페이지나 레이아웃에서 직접 쿠키를 설정할 수 없습니다. 미들웨어에서 쿠키를 설정할 수도 있습니다.

### multi-tenant 앱을 빌드하려면 어떻게 해야 하나요?

multiple tenants에 서비스를 제공하는 단일 Next.js 애플리케이션을 구축하려는 경우 권장 아키텍처를 보여주는 [예제를 빌드했습니다.](https://vercel.com/templates/next.js/platforms-starter-kit)

### 앱 라우터 캐시를 무효화하려면 어떻게 해야 하나요?

Next.js에는 여러 계층의 캐싱이 있으며, 따라서 캐시의 여러 부분을 무효화하는 방법도 여러 가지가 있습니다. 캐싱에 대해 자세히 알아보세요.

### 앱 라우터에 구축된 포괄적인 오픈 소스 애플리케이션이 있나요?

예. [Next.js 커머스](https://vercel.com/templates/next.js/nextjs-commerce) 또는 [플랫폼 스타터 키트](https://vercel.com/templates/next.js/platforms-starter-kit)에서 오픈 소스인 두 가지 대규모 앱 라우터 사용 예시를 확인할 수 있습니다.

⏪ Previous : [Next.js 프로젝트](./002-ProjectStructure.md)

⏩ Next :  [애플리케이션 구축](../애플리케이션구축/000-BuildingYourApplication.md)