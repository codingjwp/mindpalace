# ê³¼ì œ ì†Œê°œ

ì•ì— íŒ€ê³¼ ê°™ì´ êµ¬í˜„í•œ ê²€ì„¹ë°” í”„ë¡œì íŠ¸ë¥¼  ë¼ì´ë¸ŒëŸ¬ë¦¬ ë³€ê²½ ë° ê¸°ëŠ¥ ì¶”ê°€ë¥¼ í•˜ì—¬ í”„ë¡œì íŠ¸ë¥¼ ë¦¬í™í† ë§ì„ í•´ë³´ì•˜ìŠµë‹ˆë‹¤.

## ì´ì „ ê³¼ì œ ê´€ë ¨ ë‚´ìš©

í”„ë¡œì íŠ¸ ì¸ì› : ë³¸ì¸ ì™¸ 6ëª…

[ì´ì „ ê³¼ì œ ë§í¬](https://github.com/codingjwp/pre-onboarding-11th-4-14)

### ì´ì „ ê³¼ì œ ëª©í‘œ

1. ê²€ìƒ‰ì°½ êµ¬í˜„ (setTimeì„ ì´ìš©í•œ ë””ë°”ìš´ìŠ¤ë¥¼ ì´ìš©í•œ  API í˜¸ì¶œ íšŸìˆ˜ ê°ì†Œ)
2. ê²€ìƒ‰ì–´ ì¶”ì²œ ê¸°ëŠ¥ êµ¬í˜„ (í‚¤ë³´ë“œ ë° í´ë¦­ê¸°ëŠ¥ êµ¬í˜„)
3. ìºì‹± ê¸°ëŠ¥ êµ¬í˜„ ( localstorgeë¥¼ ì´ìš©í•œ êµ¬í˜„)

## ëª©í‘œ

1. ê²€ìƒ‰ì°½ êµ¬í˜„
2. ê²€ìƒ‰ì–´ ì¶”ì²œ ê¸°ëŠ¥
3. ìºì‹± ê¸°ëŠ¥ êµ¬í˜„
4. ê²€ìƒ‰ ê²°ê³¼ í˜ì´ì§€ êµ¬í˜„
5. ë°˜ì‘í˜• ì›¹í˜ì´ì§€ êµ¬í˜„
6. Mock API êµ¬í˜„

## ì‚¬ìš© ë¼ì´ë¸ŒëŸ¬ë¦¬ ë° ì„¤ì¹˜ ë°©ë²•

![sass](https://img.shields.io/badge/sass-1.67.0-FF0000?logo=sass)
![classnames](https://img.shields.io/badge/classnames-2.3.2-00FFFF?logo=classnames)
![react-query](https://img.shields.io/badge/react--query-3.39.3-800000?logo=react-query)
![json-server](https://img.shields.io/badge/json--server-0.17.3-800000?logo=json-server)

### Mock API ì„œë²„

```bash
git clone https://github.com/codingjwp/mock-search-static-data.git
cd mock-search-static-data
npm i && npm start
```

### í´ë¼ì´ì–¸íŠ¸

```bash
git clone https://github.com/codingjwp/searchbar-project.git
cd searchbar-project
npm i && npm run dev
```

### í´ë¼ì´ì–¸íŠ¸ .env file ìƒì„± ìë£Œ

```bash
# ê²€ìƒ‰ì–´ ì¶”ì²œ API
VITE_SEARCH_CONTENT="http://localhost:4000/pokemonlist?_limit=5&searchcontent_like="
# ê¸°ë³¸ ì´ë¯¸ì§€ API
VITE_API_IMG="http://localhost:4000/sprites/"
# í¼ ì´ë¯¸ì§€ API 
VITE_API_FORM="http://localhost:4000/form/"
# ê²€ìƒ‰ ê²°ê³¼ ì •ë³´ 
VITE_API_DB="http://localhost:4000/pokemondb?id="
```

## Folder êµ¬ì¡°

### í´ë¼ì´ì–¸íŠ¸ í´ë” êµ¬ì¡°

ğŸ“‚ src : root í´ë”  
â”—ğŸ“‚ apis : recoil ëŒ€í•œ ì½”ë“œ  
â”—ğŸ“‚ assets : ê°„ë‹¨í•œ ì´ë¯¸ì§€ë“¤  
â”—ğŸ“‚ components : ì»´í¬ë„ŒíŠ¸ ì½”ë“œ  
â”—ğŸ“‚ hooks : ì»¤ìŠ¤í…€ í›… ì½”ë“œ  
â”—ğŸ“‚ pages : í˜ì´ì§€ ë ˆì´ì•„ì›ƒ ì½”ë“œ  

### Mock API í´ë” êµ¬ì¡°

ğŸ“‚ assets : ì •ì  ì´ë¯¸ì§€ ì €ì¥ í´ë”  
â”—ğŸ“‚ form : í¼ì²´ì¸ì§€ ê´€ë ¨ ì´ë¯¸ì§€(ë¯¸ì™„ì„±)  
â”—ğŸ“‚ sprites : ê¸°ë³¸ ì¹´ë“œ ì´ë¯¸ì§€  
â”—ğŸ“‚ types : íƒ€ì… ê´€ë ¨ ìŠ¤í”„ë¼ì´íŠ¸  

## êµ¬í˜„

### 1. ë°˜ì‘í˜• ì›¹í˜ì´ì§€ êµ¬í˜„

ëª¨ë°”ì¼ firstë¡œ ëª¨ë°”ì¼ í™”ë©´ì„ ê¸°ì¤€ìœ¼ë¡œ íƒœë¸”ë¦¿, ë°ìŠ¤í¬íƒ‘ ìˆœìœ¼ë¡œ ì‘ì„±ì„ ì‹œì‘í•˜ì˜€ìŠµë‹ˆë‹¤.

ì´ì „ í”„ë¡œì íŠ¸ì—ì„œëŠ” í™”ë©´ ë° ì»´í¬ë„ŒíŠ¸ ì‘ì„±ì— `styled-componets`ë¥¼ ì‚¬ìš©í•˜ì˜€ìœ¼ë‚˜ **CSS-IN-JS**ë¥¼ ì‚¬ìš©í•˜ë©´ì„œ ì¸í•´ ë²ˆë“¤ í¬ê¸° ë° ë¡œë“œ ì‹œê°„ì¦ê°€ë¡œ ì¸í•´ **CSS**ë¡œ ****ë³€ê²½í•˜ì˜€ìœ¼ë©° ë³€ìˆ˜ ë° í•¨ìˆ˜í˜•íƒœë¥¼ ë§Œë“¤ ìˆ˜ ìˆëŠ” **SCSS**ë¥¼ ì‚¬ìš©í•˜ì—¬ ì ìš©í•˜ì˜€ìŠµë‹ˆë‹¤.

```scss
@mixin tablet {
  @media all and (min-width: 768px) {
    @content;
  }
}

@mixin desktop {
  @media all and (min-width: 1024px) {
    @content;
  }
}
```

### 2. ê²€ìƒ‰ ê²°ê³¼ í˜ì´ì§€ êµ¬í˜„

ì¹´ë“œ í˜•íƒœì˜ êµ¬í˜„ í˜ì´ì§€ë¥¼ êµ¬í˜„ í•˜ì˜€ìœ¼ë©° ë°˜ì‘í˜•ì— ë”°ë¼ ì¹´ë“œ ëª¨ìŠµ ë° ë‚´ìš©ì´ ë° ë‚´ìš©ì´ ë‹¬ë¼ì§‘ë‹ˆë‹¤.

ì²« ë²ˆì§¸ ì¹´ë“œ ê²½ìš° **ê¸°ë³¸ ì´ë¯¸ì§€, í¼ì— ë”°ë¥¸ ì´ë¯¸ì§€, íƒ€ì… ì´ë¯¸ì§€, ë²ˆí˜¸, í•œê¸€ ì´ë¦„, ì˜ì–´ ì´ë¦„, í¬ì¼“ëª¬ ë„ê° ë‚´ìš©**ìœ¼ë¡œ êµ¬ì„±ë˜ì–´ ìˆìŠµë‹ˆë‹¤.

ë‘ ë²ˆì§¸ ì¹´ë“œ ê²½ìš° ìŠ¤í…Œì´í„°ìŠ¤ë¡œ `hp, attack, defense, spattack, spdefense, speed` ìœ¼ë¡œ **bar** í˜•íƒœë¡œ ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤.

### 3. ê²€ìƒ‰ ë°” ê´€ë ¨ ê¸°ëŠ¥ êµ¬í˜„

ë¹ˆ ê°’ì¼ ê²½ìš° ì—”í„° ê¸°ëŠ¥ì„ í•˜ì§€ ëª»í•˜ê²Œ êµ¬í˜„ ë° ê²€ìƒ‰ì–´ê°€ ì™„ì„± ë˜ì§€ ì•Šì•˜ì„ ê²½ìš° ê²€ìƒ‰ì–´ ì¶”ì²œ ë‚´ìš© ì¤‘ ì²« ë²ˆì§¸ ë‚´ìš©ìœ¼ë¡œ ì¡°íšŒ ê°€ëŠ¥í•˜ë„ë¡ í•˜ì˜€ìŠµë‹ˆë‹¤.

í´ë¦­ ë° ì—”í„° ì‹œ ê²€ìƒ‰ ë°”ì— `focus`ê°€ ë˜ì§€ ì•ŠëŠ” ë¶€ë¶„ì„ ìˆ˜ì •í•˜ì˜€ìŠµë‹ˆë‹¤.

```tsx
const handleTouchOfClick = (e: MouseEvent) => {
    if ((e.target as HTMLElement).nodeName !== 'LI') return;
    const li = e.target as HTMLLIElement;
    if (li.title === 'no-search') return;
    setSearchText(li.innerText.split('(')[0]);
    textRef.current?.focus();
    resetIndex();
  };
```

### 4. ê²€ìƒ‰ì–´ ì¶”ì²œ ê¸°ëŠ¥ êµ¬í˜„

ì´ì „ í”„ë¡œì íŠ¸ì—ì„œëŠ” ê²€ìƒ‰ë°”ì— ì‘ì„±ëœ ë‚´ìš©ê³¼ ê´€ë ¨ëœ ë‚´ìš© ì „ë¶€ë¥¼ ì¶”ì²œì— ì¶œë ¥í•˜ì˜€ì§€ë§Œ ì†ë„ë° ë¹„ìš© ì¸¡ë©´ì—ì„œ ë§ì´ ë°œìƒí• ìˆ˜ ìˆì–´ì„œ ì¶”ì²œ ê²€ìƒ‰ì–´ í‘œì‹œë¥¼ ì œí•œí•˜ì—¬ 5ê°œë¡œ ì„¤ì •í•˜ì˜€ìŠµë‹ˆë‹¤

`'/pokemonlist?_limit=5'` APIì—ì„œ ì¿¼ë¦¬ìŠ¤íŠ¸ë§ì„ ì´ìš©í•˜ì—¬ ì œí•œì„ ì¤¬ìŠµë‹ˆë‹¤.

### 5. ìºì‹± ê¸°ëŠ¥ êµ¬í˜„

ì´ì „ í”„ë¡œì íŠ¸ì—ì„œëŠ” `localstorage`ë¥¼ ì´ìš©í•˜ì—¬ ìºì‹± ê¸°ëŠ¥ì„ êµ¬í˜„í•˜ì˜€ìœ¼ë‚˜ `react-query` ë¼ì´ë¸ŒëŸ¬ë¦¬ì— ëŒ€í•´ ì•Œê³  ì‹¶ì–´ `react-query`ë¥¼ ì‚¬ìš©í•˜ì—¬ ìºì‹± ê¸°ëŠ¥ì„ êµ¬í˜„í•´ ë³´ì•˜ìŠµë‹ˆë‹¤.

**ê¸°ë³¸ react-query ì„¤ì •**

ëŠë¦° ë„¤íŠ¸ì›Œí¬ ê²½ìš° `retry`ê°€ ë§ì„ ê²½ìš° ë„ˆë¬´ ì•ˆì¢‹ì€ ì‚¬ìš©ì ê²½í—˜ì„ ì¤„ ìˆ˜ ìˆì–´ retryë¥¼ 0ë¡œ ì ìš©í•˜ì˜€ìŠµë‹ˆë‹¤. ê·¸ë¦¬ê³  ëŠë¦° ê²½ìš° `Loading`ë˜ëŠ” `skeleton`ì„ ì£¼ê¸° ìœ„í•´ `suspense`ë¥¼ ì ìš©í•˜ê¸° ìœ„í•´ ì„¤ì •ì„ `true`ë¡œ í•˜ì˜€ìŠµë‹ˆë‹¤.

```tsx
const queryClient = new QueryClient({
  defaultOptions: {
    queries: { retry: 0, suspense: true, },
  },
});

const Routers = () => {
  return (
    <QueryClientProvider client={queryClient}>
      <RouterProvider router={routerElements} />
    </QueryClientProvider>
  );
};
```

`useQuery`ë¥¼ ê°„ë‹¨í•œ hookìœ¼ë¡œ ë§Œë“¤ì–´ì„œ ì ìš©í•˜ì˜€ìœ¼ë©° ìºì‹±ì‹œê°„ì„ ì§€ì •í•˜ì˜€ìŠµë‹ˆë‹¤.

**useQuery ì ìš©**

- `queryKey` : ìºì‹± í‚¤ ë™ì¼í•œ í‚¤ê°€ ë“¤ì–´ì˜¬ ê²½ìš° ìºì‹±
- `queryFn` : ì„œë²„ì™€ ì—°ê²°í•˜ëŠ” í•¨ìˆ˜
- `staleTime` : ìƒˆë¡œìš´ fetchë¥¼ í•  ì‹œê°„ í‘œì‹œ
- `cacheTime` : ìºì‹± ê°€ëŠ¥í•œ ì‹œê°„ í‘œì‹œ
- `useErrorBoundary` :  ì—ëŸ¬ ë©”ì„¸ì§€ í‘œì‹œ

```tsx
const searchPokemonDb = async (id: string) => {
  try {
    if (id === '') return undefined;
    const response = await fetch(`${import.meta.env.VITE_API_DB}${id}`);
    if (!response.ok) throw new Error('Network Error');
    const data = (await response.json()) as PokemonProps[];
    return data.length === 0 ? undefined : data[0];
  } catch (error: unknown) {
    const data = (error as Error).message;
    throw new Error('There was a problem with the fetch operation: ' + data);
  }
};

export const useSearchDetail = (init: string) => {
  return useQuery({
    queryKey: ['searchPokemonDb', init],
    queryFn: () => searchPokemonDb(init),
    staleTime: 1000 * 60 * 60 * 24,
    cacheTime: 1000 * 60 * 60 * 24,
    useErrorBoundary: true,
  });
};
```

### 6. Mock API ê¸°ëŠ¥ êµ¬í˜„

`json-server`ì„ ì´ìš©í•œ **Mock API**ë¥¼ ë§Œë“¤ì–´ ì‚¬ìš©í•˜ì˜€ìŠµë‹ˆë‹¤.

### ì—”ë“œ í¬ì¸íŠ¸

`routes.json`ì— ì„¤ì •ë˜ì–´ ìˆìŠµë‹ˆë‹¤.

- `/pokemonlist`: ê²€ìƒ‰ë°” ì¶”ì²œë¦¬ìŠ¤íŠ¸ ëª©ë¡
- `/pokemondb`: í¬ì¼“ëª¬ ì •ë³´

```tsx
# ì‚¬ìš© ë°©ë²•
${localhostì£¼ì†Œ}/pokemonlist?_limit=5&searchcontent_like=${ê²€ìƒ‰ë°”ì— ì…ë ¥í•œ ë‚´ìš©}
${localhostì£¼ì†Œ}/pokemondb?id=${ê²€ìƒ‰ë°”ì— ì…ë ¥í•œ ë‚´ìš©ì˜ idê°’}
```

### JSON ì •ë³´

- `/pokemonlist`Â : ê²€ìƒ‰ë°”ì— ì…ë ¥ì‹œ ë‚˜íƒ€ë‚˜ëŠ” ê²€ìƒ‰ë¦¬ìŠ¤íŠ¸
  - `id`: ë²ˆí˜¸
  - `searchcontent`: ê²€ìƒ‰ì‹œ ì‚¬ìš©ë˜ëŠ” ë‚´ìš©
  - `searchterm`: ê²€ìƒ‰ ì¶”ì²œ ì¶œë ¥ ë‚´ìš©
- `/pokemondb`Â : ê²€ìƒ‰ í›„ ì¹´ë“œ ì •ë³´ì— í‘œì‹œë˜ëŠ” ê°’
  - `id`: ë²ˆí˜¸
  - `enname`: ì˜ì–´ì´ë¦„
  - `krname`: í•œê¸€ì´ë¦„
  - `form`: í¼ ë¦¬ìŠ¤íŠ¸
  - `type`: íƒ€ì… ë¦¬ìŠ¤íŠ¸
  - `state`Â : ìŠ¤í…Œì´í„°ìŠ¤ ê°ì²´
    - `hp`: ì²´ë ¥
    - `attack`: ê³µê²©ë ¥
    - `defense`: ë°©ì–´ë ¥
    - `spattack`: íŠ¹ìˆ˜ ê³µê²©ë ¥
    - `spdefense`: íŠ¹ìˆ˜ ë°©ì–´ë ¥
    - `speed`: ìŠ¤í”¼ë“œ
  - `imgname`: ì´ë¯¸ì§€ ì´ë¦„

## í”„ë¡œì íŠ¸ ì´ë¯¸ì§€

1ì°¨ ë°˜ì‘í˜• ì ìš© ì´ë¯¸ì§€

### ëª¨ë°”ì¼

|ê¸°ë³¸ í˜ì´ì§€|ê²€ìƒ‰ë°” ë° ê²€ìƒ‰ì–´ ì¶”ì²œ|ê²€ìƒ‰ ê²°ê³¼ í˜ì´ì§€|
|:---:|:---:|:---:|
|![ê¸°ë³¸ í˜ì´ì§€](https://github-production-user-asset-6210df.s3.amazonaws.com/113403155/273480776-da3fe38d-8f2f-42cb-b808-d3d244ba3e29.png)|![ê²€ìƒ‰ë°” ë° ê²€ì„¹ì–´](https://github-production-user-asset-6210df.s3.amazonaws.com/113403155/273480789-8611b330-98de-4822-941b-27e6b0349dff.png)|![ê²°ê³¼ í˜ì´ì§€](https://github-production-user-asset-6210df.s3.amazonaws.com/113403155/273480905-2ff243a3-3e61-4bcd-be87-858b064a929d.png)|

### íƒœë¸”ë¦¿

|ê²€ìƒ‰ë°” ë° ê²€ìƒ‰ì–´ ì¶”ì²œ|ê²€ìƒ‰ ê²°ê³¼ í˜ì´ì§€|
|:---:|:---:|
|![ê²€ìƒ‰ë°” ë° ê²€ìƒ‰ì–´](https://github-production-user-asset-6210df.s3.amazonaws.com/113403155/273480945-65f68e51-6bbc-4744-8431-199bea5e4f72.png)|![ê²°ê³¼ í˜ì´ì§€](https://github-production-user-asset-6210df.s3.amazonaws.com/113403155/273480837-0987d9f8-31e6-4270-bf46-7325ba93d290.png)|

### ë°ìŠ¤í¬íƒ‘

|ê²€ìƒ‰ë°” ë° ê²€ìƒ‰ì–´ ì¶”ì²œ|ê²€ìƒ‰ ê²°ê³¼ í˜ì´ì§€|
|:---:|:---:|
|![ê²€ìƒ‰ë°” ë° ê²€ìƒ‰ì–´](https://github-production-user-asset-6210df.s3.amazonaws.com/113403155/273480969-a1dcc138-f277-463f-8f1c-b714b48e30c3.png)|![ê²°ê³¼ í˜ì´ì§€](https://github-production-user-asset-6210df.s3.amazonaws.com/113403155/273480980-d861ad68-42f9-45e5-9848-eb9cc152eca0.png)|

## ìµœì¢… ì ìš© í”„ë¡œì íŠ¸ ì´ë¯¸ì§€

2ì°¨ ë°˜ì‘í˜• ì ìš© ì´ë¯¸ì§€

### ëª¨ë°”ì¼

|ê¸°ë³¸ í˜ì´ì§€|ê²€ìƒ‰ë°” ë° ê²€ìƒ‰ì–´ ì¶”ì²œ|ê²€ìƒ‰ ê²°ê³¼ í˜ì´ì§€|
|:---:|:---:|:---:|
|![ê¸°ë³¸ í˜ì´ì§€](https://github-production-user-asset-6210df.s3.amazonaws.com/113403155/274134559-93ff3480-2b2c-40a4-9a13-c71123d66e31.png)|![ê²€ìƒ‰ë°” ë° ê²€ìƒ‰ì–´ ì¶”ì²œ](https://github-production-user-asset-6210df.s3.amazonaws.com/113403155/274134574-7c6c8d0f-3c17-4c36-a472-0866aa1f918a.png)|![ê²°ê³¼ í˜ì´ì§€](https://github-production-user-asset-6210df.s3.amazonaws.com/113403155/274134590-d6249d1e-8ea2-45f5-b33e-df1269315dc7.png)|

### íƒœë¸”ë¦¿

|ê¸°ë³¸ í˜ì´ì§€|ê²€ìƒ‰ë°” ë° ê²€ìƒ‰ì–´ ì¶”ì²œ|ê²€ìƒ‰ ê²°ê³¼ í˜ì´ì§€|
|:---:|:---:|:---:|
|![ê¸°ë³¸ í˜ì´ì§€](https://github-production-user-asset-6210df.s3.amazonaws.com/113403155/274134613-06c16934-a13e-47a4-a318-c0a6a5e64a4b.png)|![ê²€ìƒ‰ë°” ë° ê²€ìƒ‰ì–´ ì¶”ì²œ](https://github-production-user-asset-6210df.s3.amazonaws.com/113403155/274134622-68f13b07-3edf-4c94-a712-89ec8c3f862c.png)|![ê²°ê³¼ í˜ì´ì§€](https://github-production-user-asset-6210df.s3.amazonaws.com/113403155/274134631-309aa322-7fd7-4dc3-8492-eaee0946d74d.png)|

### ë°ìŠ¤í¬íƒ‘

|ê¸°ë³¸ í˜ì´ì§€|ê²€ìƒ‰ë°” ë° ê²€ìƒ‰ì–´ ì¶”ì²œ|ê²€ìƒ‰ ê²°ê³¼ í˜ì´ì§€|
|:---:|:---:|:---:|
|![ê¸°ë³¸ í˜ì´ì§€](https://github-production-user-asset-6210df.s3.amazonaws.com/113403155/274134656-a68eb138-3264-4d1d-9db4-961f8b57e5f3.png)|![ê²€ìƒ‰ë°” ë° ê²€ìƒ‰ì–´ ì¶”ì²œ](https://github-production-user-asset-6210df.s3.amazonaws.com/113403155/274134666-c47ab965-9e9b-4b4e-b3e7-d155c055a147.png)|![ê²°ê³¼ í˜ì´ì§€](https://github-production-user-asset-6210df.s3.amazonaws.com/113403155/274134675-72d138f6-39d8-4347-8a7a-10d079cd1563.png)|
