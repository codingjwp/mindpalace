# Performance Hooks(useDeferredValue)

> 퍼포먼스 훅(useDeferredValue) 

`useDeferredValue`는 UI 일부의 업데이트를 지연시킬 수 있는 React 훅입니다.

```typescript
const deferredValue = useDeferredValue(value)
```

## 참조

### `useDeferredValue(value)`

컴포넌트의 최상위 레벨에서 `useDeferredValue`를 호출하여 지연된 버전의 값을 가져옵니다.

```typescript
import { useState, useDeferredValue } from 'react';

function SearchPage() {
  const [query, setQuery] = useState('');
  const deferredQuery = useDeferredValue(query);
}
```

### 매개변수

- `value`: 지연시키려는 값입니다. 어떤 타입이든 가질 수 있습니다.

### 반환값

- 초기 렌더링 중에는, 반환된 ‘지연된 값’은 사용자가 제공한 값과 동일합니다.
- 데이트가 발생하면 React는 먼저 이전 값으로 리렌더링을 시도하고, 그 다음 백그라운드에서 다시 새 값으로 리렌더링을 시도합니다.

### 주의사항

- `useDeferredValue`에 전달하는 값은 문자열 및 숫자와 같은 원시값이거나, 컴포넌트의 외부에서 생성된 객체여야 합니다.
- `useDeferredValue`가 현재 렌더링(여전히 이전 값을 사용하는 경우) 외에 다른 값을 받으면 백그라운드에서 새 값으로 다시 렌더링하도록 예약합니다
- `useDeferredValue`는 `<Suspense>`와 통합됩니다. 새 값으로 인한 백그라운드 업데이트로 인해 UI가 일시 중단되면 사용자에게 폴백이 표시되지 않습니다.
- `useDeferredValue`는 그 자체로 추가 네트워크 요청을 방지하지 않습니다.
- `useDeferredValue` 자체로 인한 고정된 지연은 없습니다. React가 원래의 리렌더링을 완료하자마자 React는 즉시 새로운 지연된 값으로 백그라운드 리렌더링 작업을 시작합니다. 그러나 이벤트로 인한 업데이트(예: 타이핑)는 백그라운드 리렌더링을 중단하고 우선순위를 갖습니다.
- `useDeferredValue`로 인한 백그라운드 리렌더링은 화면에 커밋될 때까지 Effect를 실행하지 않습니다.

## 사용법

### **값을 연기하는 것은 디바운스 및 쓰로틀과 어떤 점이 다른가요?**

이전에 사용했을 수 있는 두 가지 일반적인 최적화 기법이 있습니다

- **디바운스**는 사용자가 타이핑을 멈출 때까지(예: 1초 동안) 기다렸다가 목록을 업데이트하는 것을 의미합니다.
- **쓰로틀**은 가끔씩(예: 최대 1초에 한 번) 목록을 업데이트하는 것을 의미합니다.

`useDeferredValue`는 React 자체와 깊게 통합되어 있고 사용자의 기기에 맞게 조정되기 때문에 렌더링을 최적화하는 데 더 적합합니다.

**디바운스**나 **쓰로틀**과 달리 고정된 지연을 선택할 필요가 없습니다. 사용자의 기기가 빠른 경우 지연된 리렌더링은 거의 즉시 발생하며 눈에 띄지 않을 것입니다. 사용자의 기기가 느린 경우, 기기 속도에 비례하여 목록이 `input`에 **지연**됩니다.

**디바운스**나 **쓰로틀**과 달리 `useDeferredValue`에 의해 수행되는 지연된 리렌더링은 기본적으로 중단 가능합니다. 

즉, React가 큰 목록을 다시 렌더링하는 도중에 사용자가 다른 키 입력을 하면 React는 해당 리렌더링을 중단하고 키 입력을 처리한 다음 백그라운드에서 다시 렌더링을 시작합니다. 

반면 **디바운스**와 **쓰로틀**은 렌더링이 키 입력을 차단하는 순간을 연기할 뿐이므로 여전히 불안정한 경험을 만들어냅니다.

최적화하려는 작업이 렌더링 중에 발생하지 않는 경우에도 **디바운스** 및 **쓰로틀**은 여전히 유용합니다.

예를 들어, **디바운스**나 **쓰로틀**을 사용하면 네트워크 요청을 더 적게 실행할 수 있습니다. 