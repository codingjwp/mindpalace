# Effect Hooks(useEffect)

> Effect í›…ë“¤(useEffect)

`useEffect`ëŠ” ì»´í¬ë„ŒíŠ¸ë¥¼ ì™¸ë¶€ ì‹œìŠ¤í…œê³¼ ë™ê¸°í™”í•  ìˆ˜ ìžˆëŠ” React í›…ìž…ë‹ˆë‹¤.

```typescript
useEffect(setup, dependencies?)
```

## ì°¸ì¡°

### `useEffect(setup, dependencies?)`

ì»´í¬ë„ŒíŠ¸ì˜ ìµœìƒìœ„ ë ˆë²¨ì—ì„œ `useEffect`ë¥¼ í˜¸ì¶œí•˜ì—¬ Effectë¥¼ ì„ ì–¸í•©ë‹ˆë‹¤.

```typescript
function ChatRoom({ roomId }) {
  const [serverUrl, setServerUrl] = useState('https://localhost:1234');

  useEffect(() => {
    const connection = createConnection(serverUrl, roomId);
    connection.connect();
    return () => {
      connection.disconnect();
    };
  }, [serverUrl, roomId]);
}
```

### ë§¤ê°œë³€ìˆ˜

- `setup`: Effectì˜ ë¡œì§ì´ í¬í•¨ëœ í•¨ìˆ˜ìž…ë‹ˆë‹¤. ì…‹ì—… í•¨ìˆ˜ëŠ” ì„ íƒì ìœ¼ë¡œ í´ë¦°ì—… í•¨ìˆ˜ë¥¼ ë°˜í™˜í•  ìˆ˜ ìžˆìœ¼ë©° ì˜ì¡´ì„±ì´ ë³€ê²½ë˜ì–´ ë¦¬ë Œë”ë§ ë  ë•Œ ì´ì „ ê°’ìœ¼ë¡œ í´ë¦°ì—… í•¨ìˆ˜ë¥¼ ì‹¤í–‰í•œ í›„ ìƒˆë¡œìš´ ê°’ìœ¼ë¡œ ì…‹ì—… í•¨ìˆ˜ë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤.
- `dependencies` : setup ì½”ë“œ ë‚´ì—ì„œ ì°¸ì¡°ëœ ëª¨ë“  ë°˜ì‘í˜• ê°’ì˜ ëª©ë¡ìž…ë‹ˆë‹¤. ë°˜ì‘í˜• ê°’ì€ `props,` `state`, ì»´í¬ë„ŒíŠ¸ ë³¸ë¬¸ ë‚´ë¶€ì— ì„ ì–¸í•œ ëª¨ë“  ë³€ìˆ˜, í•¨ìˆ˜ë¥¼ í¬í•¨í•©ë‹ˆë‹¤.

### ë°˜í™˜ê°’

`useEffect`ëŠ” `undefined`ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.

### ì£¼ì˜ì‚¬í•­

- **ì™¸ë¶€ ì‹œìŠ¤í…œê³¼ ë™ê¸°í™”í•˜ë ¤ëŠ” ëª©ì ì´ ì•„ë‹ˆë¼ë©´ Effectê°€ í•„ìš”í•˜ì§€ ì•Šì„ì§€ë„ ëª¨ë¦…ë‹ˆë‹¤.**
- ì˜ì¡´ì„± ì¤‘ ì¼ë¶€ê°€ ì»´í¬ë„ŒíŠ¸ ë‚´ë¶€ì— ì •ì˜ëœ ê°ì²´ ë˜ëŠ” í•¨ìˆ˜ì¸ ê²½ìš° **Effectê°€ í•„ìš” ì´ìƒìœ¼ë¡œ ìžì£¼ ë‹¤ì‹œ ì‹¤í–‰ë  ìœ„í—˜ì´ ìžˆìŠµë‹ˆë‹¤**
- Effectê°€ ìƒí˜¸ìž‘ìš©ìœ¼ë¡œ ì¸í•œ ê²ƒì´ ì•„ë‹ˆë¼ë©´, **ReactëŠ” ë¸Œë¼ìš°ì €ê°€ Effectë¥¼ ì‹¤í–‰í•˜ê¸° ì „ì— ì—…ë°ì´íŠ¸ëœ í™”ë©´ì„ ë¨¼ì € ê·¸ë¦¬ë„ë¡ í•©ë‹ˆë‹¤.** Effectê°€ ì‹œê°ì ì¸ ìž‘ì—…ì„ í•˜ê³  ìžˆê³ , ì§€ì—°ì´ ëˆˆì— ë„ëŠ” ê²½ìš° `useEffect`ë¥¼ `useLayoutEffect`ë¡œ ëŒ€ì²´í•´ì•¼ í•©ë‹ˆë‹¤.
- ìƒí˜¸ìž‘ìš©ìœ¼ë¡œ ì¸í•´ Effectê°€ ë°œìƒí•œ ê²½ìš°ì—ë„, **ë¸Œë¼ìš°ì €ëŠ” Effect ë‚´ë¶€ì˜ state ì—…ë°ì´íŠ¸ë¥¼ ì²˜ë¦¬í•˜ê¸° ì „ì— í™”ë©´ì„ ë‹¤ì‹œ ê·¸ë¦´ ìˆ˜ ìžˆìŠµë‹ˆë‹¤.** ë³´í†µ ì´ê²Œ ê¸°ëŒ€í•˜ëŠ” ë™ìž‘ì¼ ê²ƒìž…ë‹ˆë‹¤. ë§Œì•½ ë¸Œë¼ìš°ì €ê°€ í™”ë©´ì„ ë‹¤ì‹œ ì¹ í•˜ì§€ ëª»í•˜ë„ë¡ ì°¨ë‹¨í•´ì•¼ í•˜ëŠ” ê²½ìš°ë¼ë©´ `useEffect`ë¥¼ `useLayoutEffect`ë¡œ ë°”ê¿”ì•¼ í•©ë‹ˆë‹¤.
- ì„œë²„ ë Œë”ë§ ì¤‘ì—ëŠ” ì‹¤í–‰ë˜ì§€ ì•Šìœ¼ë©° EffectsëŠ” í´ë¼ì´ì–¸íŠ¸ì—ì„œë§Œ ì‹¤í–‰ë©ë‹ˆë‹¤.

## ì‚¬ìš©ë²•

### **ì»¤ìŠ¤í…€ í›…ìœ¼ë¡œ Effect ê°ì‹¸ê¸°**

Effectë¥¼ ìˆ˜ë™ìœ¼ë¡œ ìž‘ì„±í•´ì•¼ í•˜ëŠ” ê²½ìš°ê°€ ìžì£¼ ë°œìƒí•œë‹¤ë©´ ì´ëŠ” ì»´í¬ë„ŒíŠ¸ê°€ ì˜ì¡´í•˜ëŠ” ì¼ë°˜ì ì¸ ë™ìž‘ì— ëŒ€í•œ ì»¤ìŠ¤í…€ í›…ì„ ì¶”ì¶œí•´ì•¼ í•œë‹¤ëŠ” ì‹ í˜¸ì¼ ìˆ˜ ìžˆìŠµë‹ˆë‹¤.

ì´ `useChatRoom` ì»¤ìŠ¤í…€ í›…ì€ Effectì˜ ë¡œì§ì„ ë³´ë‹¤ ì„ ì–¸ì ì¸ API ë’¤ì— **ìˆ¨ê¹ë‹ˆë‹¤.**

```typescript
function useChatRoom({ serverUrl, roomId }) {
  useEffect(() => {
    const options = { serverUrl: serverUrl, roomId: roomId };
    const connection = createConnection(options);
    connection.connect();
    return () => connection.disconnect();
  }, [roomId, serverUrl]);
}
```

### **Effectì—ì„œ ë°ì´í„° íŽ˜ì¹­í•˜ëŠ” ê²ƒì„ ëŒ€ì²´í•  ì¢‹ì€ ëŒ€ì•ˆì€ ë¬´ì—‡ì¸ê°€ìš”?**

Effect ë‚´ë¶€ì— `fetch`ë¥¼ ìž‘ì„±í•˜ëŠ”ê²ƒì€ ë°ì´í„°ë¥¼ `fetch`í•˜ëŠ” ì¸ê¸°ìžˆëŠ” ë°©ë²•ì´ë©°, ì™„ì „í•œ `client-side` ì•±ì—ì„œ íŠ¹ížˆ ê·¸ë ‡ìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ì´ëŠ” ë§¤ìš° ìˆ˜ë™ì ì¸ ì ‘ê·¼ ë°©ì‹ì´ë©° ìƒë‹¹í•œ ë‹¨ì ì´ ì¡´ìž¬í•©ë‹ˆë‹¤.

- **EffectëŠ” ì„œë²„ì—ì„œ ì‹¤í–‰ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.** í´ë¼ì´ì–¸íŠ¸ ì»´í“¨í„°ëŠ” ëª¨ë“  JavaScriptë¥¼ ë‹¤ìš´ë¡œë“œí•˜ê³  ì•±ì„ ë Œë”ë§í•´ì•¼ë§Œ ì´ì œ ë°ì´í„°ë¥¼ ë¡œë“œí•´ì•¼ í•œë‹¤ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìžˆìŠµë‹ˆë‹¤. ì´ëŠ” ë§¤ìš° íš¨ìœ¨ì ì´ì§€ ì•ŠìŠµë‹ˆë‹¤.
- **Effectì—ì„œ ì§ì ‘ íŽ˜ì¹­í•˜ë©´ `ë„¤íŠ¸ì›Œí¬ ì›Œí„°í´`ì„ ë§Œë“¤ê¸° ì‰½ìŠµë‹ˆë‹¤.** ë¶€ëª¨ ì»´í¬ë„ŒíŠ¸ë¥¼ ë Œë”ë§í•˜ë©´ ì¼ë¶€ ë°ì´í„°ë¥¼ íŽ˜ì¹˜í•˜ê³ , ìžì‹ ì»´í¬ë„ŒíŠ¸ë¥¼ ë Œë”ë§í•˜ë©´ ìžì‹ ì»´í¬ë„ŒíŠ¸ê°€ ë°ì´í„°ë¥¼ íŽ˜ì¹­í•˜ê¸° ì‹œìž‘í•©ë‹ˆë‹¤. ë„¤íŠ¸ì›Œí¬ê°€ ë§¤ìš° ë¹ ë¥´ì§€ ì•ŠëŠ” í•œ ëª¨ë“  ë°ì´í„°ë¥¼ ë³‘ë ¬ë¡œ íŽ˜ì¹­í•˜ëŠ” ê²ƒë³´ë‹¤ í›¨ì”¬ ëŠë¦½ë‹ˆë‹¤.
- **Effectsì—ì„œ ì§ì ‘ íŽ˜ì¹­í•œë‹¤ëŠ” ê²ƒì€ ì¼ë°˜ì ìœ¼ë¡œ ë°ì´í„°ë¥¼ ë°ì´í„°ë¥¼ ë¯¸ë¦¬ ë¡œë“œí•˜ê±°ë‚˜ ìºì‹œí•˜ì§€ ì•ŠëŠ”ë‹¤ëŠ” ì˜ë¯¸ìž…ë‹ˆë‹¤.** ì˜ˆë¥¼ ë“¤ì–´, ì»´í¬ë„ŒíŠ¸ê°€ ë§ˆìš´íŠ¸ë¥¼ í•´ì œí–ˆë‹¤ê°€ ë‹¤ì‹œ ë§ˆìš´íŠ¸í•˜ë©´ ë°ì´í„°ë¥¼ ë‹¤ì‹œ ê°€ì ¸ì™€ì•¼ í•©ë‹ˆë‹¤.
- **ì¸ì²´ ê³µí•™ì ìœ¼ë¡œ ì¢‹ì§€ ì•ŠìŠµë‹ˆë‹¤.** ì¡°ê±´ ê²½í•©ê³¼ ê°™ì€ ë²„ê·¸ê°€ ë°œìƒí•˜ì§€ ì•ŠëŠ” ë°©ì‹ìœ¼ë¡œ `fetch`Â í˜¸ì¶œì„ ìž‘ì„±í•˜ë ¤ë©´ ìƒìš©êµ¬ ì½”ë“œê°€ ìƒë‹¹ížˆ ë§Žì´ í•„ìš”í•©ë‹ˆë‹¤.

### **ë°˜ì‘í˜• ì˜ì¡´ì„± ì§€ì •**

**Effectì˜ ì˜ì¡´ì„±ì„ â€œì„ íƒâ€í•  ìˆ˜ ì—†ë‹¤ëŠ” ì ì— ìœ ì˜í•˜ì„¸ìš”.** Effectì˜ ì½”ë“œì—ì„œ ì‚¬ìš©ë˜ëŠ” ëª¨ë“  ë°˜ì‘í˜• ê°’ì€ ì˜ì¡´ì„±ìœ¼ë¡œ ì„ ì–¸í•´ì•¼ í•©ë‹ˆë‹¤.

**Effectì˜ ì½”ë“œê°€ ë°˜ì‘í˜• ê°’ì„ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ”ë‹¤ë©´ ì˜ì¡´ì„± ëª©ë¡ì€ ë¹„ì–´ ìžˆì–´ì•¼ í•©ë‹ˆë‹¤(`[]`)**

### **Effectì˜ ì´ì „ stateë¥¼ ê¸°ë°˜ìœ¼ë¡œ state ì—…ë°ì´íŠ¸í•˜ê¸°**

ì•„ëž˜ì˜ ì½”ë“œì™€ ê°™ì´ Effectì˜ ì´ì „ stateë¥¼ ê¸°ë°˜ìœ¼ë¡œ stateë¥¼ ì—…ë°ì´íŠ¸í•˜ë ¤ëŠ” ê²½ìš° ë¬¸ì œê°€ ë°œìƒí•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.

```typescript
function Counter() {
  const [count, setCount] = useState(0);

  useEffect(() => {
    const intervalId = setInterval(() => {
      setCount(count + 1); // ë§¤ì´ˆë§ˆë‹¤ ì¹´ìš´í„°ë¥¼ ì¦ê°€ì‹œí‚¤ë ¤ë©´
    }, 1000)
    return () => clearInterval(intervalId);
  }, [count]); // ðŸš©í•˜ì§€ë§Œ ì¢…ì†ì„±ìœ¼ë¡œ 'count'ë¥¼ ì§€ì •í•˜ë©´ í•­ìƒ ê°„ê²©ì´ ìž¬ì„¤ì •ë©ë‹ˆë‹¤.
}
```

countê°€ ë°˜ì‘í˜• ê°’ì´ë¯€ë¡œ ì˜ì¡´ì„± ëª©ë¡ì— ì§€ì •í•´ì•¼í•©ë‹ˆë‹¤. í•˜ì§€ë§Œ ì´ë¡œ ì¸í•´ countê°€ ë³€ê²½ë  ë•Œ ë§ˆë‹¤ clean up í•¨ìˆ˜ê°€ ë°œìƒí•©ë‹ˆë‹¤. ìœ„ ì½”ë“œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ì„œëŠ” ì˜ì¡´ì„± ëª©ë¡ì„ ì—†ì• ê³  `setCount(c => c + 1)` ë¡œ ìˆ˜ì •í•´ì•¼í•©ë‹ˆë‹¤.

## ë¬¸ì œ í•´ê²°

### **ë‚´ Effectê°€ ë¬´í•œížˆ ìž¬ì‹¤í–‰ë©ë‹ˆë‹¤**

- Effectê°€ ì¼ë¶€ stateë¥¼ ì—…ë°ì´íŠ¸í•˜ê³  ìžˆìŠµë‹ˆë‹¤.
- ì´ stateëŠ” ë¦¬ë Œë”ë§ì„ ì¼ìœ¼í‚¤ë©°, ì´ë¡œë¶€í„° Effectì˜ ì˜ì¡´ì„±ì´ ë³€ê²½ë©ë‹ˆë‹¤.

### **ì»´í¬ë„ŒíŠ¸ê°€ ë§ˆìš´íŠ¸ í•´ì œë˜ì§€ ì•Šì•˜ëŠ”ë°ë„ í´ë¦°ì—… ë¡œì§ì´ ì‹¤í–‰ë©ë‹ˆë‹¤.**

í´ë¦°ì—… ê¸°ëŠ¥ì€ ë§ˆìš´íŠ¸ í•´ì œì‹œ ë¿ë§Œ ì•„ë‹ˆë¼ ë³€ê²½ëœ ì˜ì¡´ì„±ê³¼ í•¨ê»˜ ë‹¤ì‹œ ë Œë”ë§í•˜ê¸° ì „ì— ë§¤ë²ˆ ì‹¤í–‰ë©ë‹ˆë‹¤.

í´ë¦°ì—… ì½”ë“œëŠ” ìžˆëŠ”ë° ê·¸ì— ëŒ€ì‘í•˜ëŠ” ì…‹ì—… ì½”ë“œëŠ” ì—†ë‹¤ë©´, ì¼ë°˜ì ìœ¼ë¡œ ë¬¸ì œê°€ ìžˆëŠ” ì½”ë“œìž…ë‹ˆë‹¤.

```typescript
useEffect(() => {
  return () => {
    doSomething();
  };
}, []);
```

í´ë¦°ì—… ë¡œì§ì€ ì…‹ì—… ë¡œì§ê³¼ **ëŒ€ì¹­**ì´ì–´ì•¼ í•˜ë©°, ì…‹ì—…ì´ ìˆ˜í–‰í•œ ëª¨ë“  ìž‘ì—…ì„ ì¤‘ì§€í•˜ê±°ë‚˜ ì·¨ì†Œí•´ì•¼ í•©ë‹ˆë‹¤.

```typescript
useEffect(() => {
    const connection = createConnection(serverUrl, roomId);
    connection.connect();
    return () => {
      connection.disconnect();
    };
  }, [serverUrl, roomId]);
```